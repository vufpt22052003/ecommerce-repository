<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!-- Tell the browser to be responsive to screen width -->

<!-- Favicon icon -->
<link rel="icon" type="image/png" sizes="16x16"
	href="plugins/images/favicon.png">
<!-- Custom CSS -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.0/jquery.toast.min.css"
	integrity="sha512-wJgJNTBBkLit7ymC6vvzM1EcSWeM9mmOu+1USHaRBbHkm6W9EgM0HY27+UtUaprntaYQJF75rc8gjxllKs5OIQ=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />
	
<link href="OrderAdmin/css/style.min.css" rel="stylesheet">
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" crossorigin="anonymous" />


<script src="controllers/Controller.js"></script>
</head>
<style>
.modal.fade.show {
	padding-right: 650px !important;
	padding-top: 80px !important;
} /* Hiệu ứng mờ dần */
.fade-out {
	opacity: 0;
	transition: opacity 0.5s ease-in-out;
}

.toastify-container .toastify-content {
	font-size: 500px; /* Kích thước chữ */
	padding: 50px; /* Khoảng cách nội dung và viền */
}

a {
	direction: none !important;
}
</style>
<body ng-app="MyApp" ng-controller="OrderController">
	<!-- ============================================================== -->
	<!-- Preloader - style you can find in spinners.css -->
	<!-- ============================================================== -->
	<div class="preloader">
		<div class="lds-ripple">
			<div class="lds-pos"></div>
			<div class="lds-pos"></div>
		</div>
	</div>
	<!-- ============================================================== -->
	<!-- Main wrapper - style you can find in pages.scss -->
	<!-- ============================================================== -->
	<div id="main-wrapper" data-layout="vertical" data-navbarbg="skin5"
		data-sidebartype="full" data-sidebar-position="absolute"
		data-header-position="absolute" data-boxed-layout="full">
		<!-- ============================================================== -->
		<!-- Topbar header - style you can find in pages.scss -->
		<!-- ============================================================== -->
		<header class="topbar" data-navbarbg="skin5">
			<nav class="navbar top-navbar navbar-expand-md navbar-dark">
				<div class="navbar-header" data-logobg="skin6">
					<!-- ============================================================== -->
					<!-- Logo -->
					<!-- ============================================================== -->
					<a class="navbar-brand" href="dashboard.html"> <!-- Logo icon -->
						<b class="logo-icon"> <!-- Dark Logo icon --> <img
							src="plugins/images/logo-icon.png" alt="homepage" />
					</b> <!--End Logo icon --> <!-- Logo text --> <span class="logo-text">
							<!-- dark Logo text --> <img src="plugins/images/logo-text.png"
							alt="homepage" />
					</span>
					</a>
					<!-- ============================================================== -->
					<!-- End Logo -->
					<!-- ============================================================== -->
					<!-- ============================================================== -->
					<!-- toggle and nav items -->
					<!-- ============================================================== -->
					<a
						class="nav-toggler waves-effect waves-light text-dark d-block d-md-none"
						href="javascript:void(0)"><i class="ti-menu ti-close"></i></a>
				</div>
				<!-- ============================================================== -->
				<!-- End Logo -->
				<!-- ============================================================== -->
				<div class="navbar-collapse collapse" id="navbarSupportedContent"
					data-navbarbg="skin5">
					<ul class="navbar-nav d-none d-md-block d-lg-none">
						<li class="nav-item"><a
							class="nav-toggler nav-link waves-effect waves-light text-white"
							href="javascript:void(0)"><i class="ti-menu ti-close"></i></a></li>
					</ul>
					<!-- ============================================================== -->
					<!-- Right side toggle and nav items -->
					<!-- ============================================================== -->
					<ul class="navbar-nav ms-auto d-flex align-items-center">

						<!-- ============================================================== -->
						<!-- Search -->
						<!-- ============================================================== -->
						<li class=" in">
							<form role="search" class="app-search d-none d-md-block me-3">
								<input type="text" placeholder="Search..."
									class="form-control mt-0"> <a href="" class="active">
									<i class="fa fa-search"></i>
								</a>
							</form>
						</li>
						<!-- ============================================================== -->
						<!-- User profile and search -->
						<!-- ============================================================== -->
						<li><a class="profile-pic" href="#"> <img
								src="plugins/images/users/varun.jpg" alt="user-img" width="36"
								class="img-circle"><span class="text-white font-medium">Steave</span></a>
						</li>
						<!-- ============================================================== -->
						<!-- User profile and search -->
						<!-- ============================================================== -->
					</ul>
				</div>
			</nav>
		</header>
		<!-- ============================================================== -->
		<!-- End Topbar header -->
		<!-- ============================================================== -->
		<!-- ============================================================== -->
		<!-- Left Sidebar - style you can find in sidebar.scss  -->
		<!-- ============================================================== -->


		<div th:replace="OrderAdmin/menu :: menu"></div>


		<!-- ============================================================== -->
		<!-- End Left Sidebar - style you can find in sidebar.scss  -->
		<!-- ============================================================== -->
		<!-- ============================================================== -->
		<!-- Page wrapper  -->
		<!-- ============================================================== -->
		<div class="page-wrapper">
			<!-- ============================================================== -->
			<!-- Bread crumb and right sidebar toggle -->
			<!-- ============================================================== -->
			<div class="page-breadcrumb bg-white">
				<div class="row align-items-center">
					<div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
						<h4 class="page-title">Quản Lý Đơn Hàng</h4>
					</div>
					<div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
						<div class="d-md-flex">
							<ol class="breadcrumb ms-auto">
								<li><a href="#" class="fw-normal">Dashboard</a></li>
							</ol>
							<a href="https://www.wrappixel.com/templates/ampleadmin/"
								target="_blank"
								class="btn btn-danger  d-none d-md-block pull-right ms-3 hidden-xs hidden-sm waves-effect waves-light text-white">Upgrade
								to Pro</a>
						</div>
					</div>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- ============================================================== -->
			<!-- End Bread crumb and right sidebar toggle -->
			<!-- ============================================================== -->
			<!-- ============================================================== -->
			<!-- Container fluid  -->
			<!-- ============================================================== -->
			<div class="container-fluid">
				<!-- ============================================================== -->
				<!-- Start Page Content -->
				<!-- ============================================================== -->
				<div class="row">
					<div class="col-sm-12">
						<div class="white-box">
							<h3 class="box-title">Quản Lý Đơn Hàng</h3>
							<p class="text-muted">
								<label for="cars">Xem Theo &nbsp;&nbsp;&nbsp;&nbsp;</label><select
									name="cars" id="cars" ng-model="selectType"
									ng-change="loadDetails(selectType)">
									<option value="all" selected>Đơn Hàng Đang Chờ</option>
									<option value="confirmed">Đơn Hàng Đã Chấp Nhận</option>
									<option value="cancelled">Đơn Hàng Đã Hủy</option>
								</select>


							</p>

							<div class="table-responsive">
								<table class="table text-nowrap">
									<thead>
										<tr>
											<th class="border-top-0">Sản Phẩm</th>
											<th class="border-top-0">Số Lượng</th>
											<th class="border-top-0">Tổng Tiền</th>
											<th class="border-top-0">Thao Tác</th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="item in details">
											<td style="word-wrap: break-word;">{{
												item.product_id.name }}</td>
											<td>{{ item.quantity }}</td>
											<td>{{ item.price }}</td>
											<td><span ng-if="selectType === 'all'"><span
													class="fa-stack" data-toggle="modal" data-target="#myModal"
													ng-click="openModal(item)"> <i
														class="fa fa-square fa-stack-2x"></i> <i
														class="fa fa-search-plus fa-stack-1x fa-inverse"></i>
												</span><span ng-click="confirm(item.id)" class="fa-stack"> <i
														class="fa fa-square fa-stack-2x"></i> <i
														class="fa fa-check fa-stack-1x fa-inverse"></i>
												</span> <!-- Biểu tượng hủy đơn --> <span
													ng-click="cancel(item.id)" class="fa-stack"> <i
														class="fa fa-square fa-stack-2x"></i> <i
														class="fa fa-times fa-stack-1x fa-inverse"></i>
												</span> </span> </span> <span ng-if="selectType === 'confirmed'">Đã Xác
													Nhận</span><span ng-if="selectType === 'cancelled'">Đã Hủy
													Đơn</span></td>
										</tr>
									</tbody>
								</table>

							</div>
						</div>
					</div>
					<nav aria-label="Page navigation example">
						<ul class="pagination">
							<li class="page-item"
								ng-repeat="i in getTotalPages() track by $index"><a
								class="page-link" href="" ng-click="changePage(i-1)">{{i}}</a></li>

						</ul>
					</nav>
				</div>

				<!-- ===================modal========================== -->
				<!-- Modal -->
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
					aria-labelledby="myModalLabel" aria-hidden="true">


					<div class="modal-dialog" role="document">
						<div class="modal-content" style="width: 1140px;">
							<div class="modal-header">
								<h5 class="modal-title" id="myModalLabel">Thông tin sản
									phẩm</h5>
								<button type="button" class="close" data-dismiss="modal"
									aria-label="Close">
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								<!-- Hiển thị thông tin sản phẩm ở đây -->

								<!-- Các trường thông tin khác -->
								<table>
									<tr>
										<th style="padding: 0 20px;"></th>
										<th style="padding: 0 20px;">Tên Sản Phẩm</th>
										<th style="padding: 0 20px;">Người Mua</th>
										<th style="padding: 0 20px;">Số Lượng</th>
										<th style="padding: 0 20px;">Tổng Giá</th>
										<th style="padding: 0 20px;">Đã Đặt Ngày</th>
										<th style="padding: 0 20px;">Trạng Thái</th>
										<th style="padding: 0 20px;">Thao Tác</th>
									</tr>
									<tr>

										<td style="padding: 0 20px;"><img
											style="object-fit: contain; width: 100px; height: 100px;"
											src="images/{{ selectedProduct.product_id.img }}"
											alt="Ảnh sản phẩm"></td>


										<td style="padding: 0 20px; word-wrap: break-word;">{{
											selectedProduct.product_id.name }}</td>

										<td style="padding: 0 20px; word-wrap: break-word;">{{
											selectedProduct.order_id.user_id.us }}</td>
										<td style="padding: 0 20px; word-wrap: break-word;">{{
											selectedProduct.quantity }}</td>
										<td style="padding: 0 20px;">{{
											selectedProduct.product_id.price * selectedProduct.quantity
											}}</td>
										<td style="padding: 0 20px; word-wrap: break-word;"></td>
										<td style="padding: 0 20px; word-wrap: break-word;">Đang
											Chờ</td>
										<td style="padding: 0 20px; word-wrap: break-word;"><span
											ng-if="selectedOption === 'pending'"> <!-- Biểu tượng xác nhận đơn -->
												<span ng-click="confirm(selectedProduct.id)"
												class="fa-stack"> <i class="fa fa-square fa-stack-2x"></i>
													<i class="fa fa-check fa-stack-1x fa-inverse"></i>
											</span> <!-- Biểu tượng hủy đơn --> <span
												ng-click="cancel(selectedProduct.id)"
												class="fa-stack cancel-icon"> <i
													class="fa fa-square fa-stack-2x"></i> <i
													class="fa fa-times fa-stack-1x fa-inverse"></i>
											</span>

										</span> </span> <span ng-if="selectedOption === 'confirm'">Đã Xác
												Nhận</span><span ng-if="selectedOption === 'cancel'">Đã Hủy
												Đơn</span></td>
									</tr>
								</table>

							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary"
									data-dismiss="modal">Đóng</button>
							</div>
						</div>
					</div>
				</div>

				<button ng-click="s()">s</button>
				<!-- ============================================================== -->
				<!-- End PAge Content -->
				<!-- ============================================================== -->
				<!-- ============================================================== -->
				<!-- Right sidebar -->
				<!-- ============================================================== -->
				<!-- .right-sidebar -->
				<!-- ============================================================== -->
				<!-- End Right sidebar -->
				<!-- ============================================================== -->
			</div>
			<!-- ============================================================== -->
			<!-- End Container fluid  -->
			<!-- ============================================================== -->
			<!-- ============================================================== -->
			<!-- footer -->
			<!-- ============================================================== -->
			<footer class="footer text-center">
				2021 © Ample Admin brought to you by <a
					href="https://www.wrappixel.com/">wrappixel.com</a>
			</footer>
			<!-- ============================================================== -->
			<!-- End footer -->
			<!-- ============================================================== -->
		</div>
		<!-- ============================================================== -->
		<!-- End Page wrapper  -->
		<!-- ============================================================== -->
	</div>
	<!-- ============================================================== -->
	<!-- End Wrapper -->
	<!-- ============================================================== -->
	<!-- ============================================================== -->
	<!-- All Jquery -->
	<!-- ============================================================== -->

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
		src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.js" integrity="sha512-zlWWyZq71UMApAjih4WkaRpikgY9Bz1oXIW5G0fED4vk14JjGlQ1UmkGM392jEULP8jbNMiwLWdM8Z87Hu88Fw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>




<!-- JavaScript của jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- JavaScript của Bootstrap -->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

	<!-- Bootstrap tether Core JavaScript -->
	<script src="OrderAdmin/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
	<script src="OrderAdmin/js/app-style-switcher.js"></script>
	<!--Wave Effects -->
	<script src="OrderAdmin/js/waves.js"></script>
	<!--Menu sidebar -->
	<script src="OrderAdmin/js/sidebarmenu.js"></script>
	<!--Custom JavaScript -->
	<script src="OrderAdmin/js/custom.js"></script>

	<!--toast-plugin  -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.0/jquery.toast.min.js"
		integrity="sha512-zv5L1hY+PMayrX2l0ojsUqem6AHpdSIVyDJBlDQH/fMLpH1JgaxPTjpum1b1AlLHdARVonrpomps+GgR0oN3MA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.0/jquery.toast.js"
		integrity="sha512-CwEY0URPo9ZtMMCpiW/mUx4iW2AseRWTbCEJZNoVr18gbFVIGmwztqu50C0LWwUYpA7PRgBXWard2HO4uwZDfA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</body>

</html>